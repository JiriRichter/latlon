((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).LATLON={})})(this,function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(e=>"symbol"==typeof(e=((e,t)=>{if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return String(e);if("object"!=typeof(n=n.call(e,t)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"))?e:e+"")(i.key),i)}}function t(e,t){return t&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/**
      * @preserve IntegraXor Web SCADA - JavaScript Number Formatter
      * http://www.integraxor.com/
      * author: KPL, KHL
      * (c)2011 ecava
      * Dual licensed under the MIT or GPL Version 2 licenses.
      */
function l(e,t){if(!e||isNaN(+t))return t;var n=(t="-"===e.charAt(0)?-t:+t)<0?t=-t:0,i=e.match(/[^\d\-\+#]/g),r=i&&i[i.length-1]||".",s=i&&i[1]&&i[0]||",",e=e.split(r),i=(t=+(t=t.toFixed(e[1]&&e[1].length))+"",e[1]&&e[1].lastIndexOf("0")),a=t.split("."),i=((!a[1]||(a[1],a[1].length<=i))&&(t=(+t).toFixed(i+1)),e[0].split(s)),o=(e[0]=i.join(""),e[0]&&e[0].indexOf("0"));if(-1<o)for(;a[0].length<e[0].length-o;)a[0]="0"+a[0];else 0==+a[0]&&(a[0]="");(t=t.split("."))[0]=a[0];var u=i[1]&&i[i.length-1].length;if(u){for(var l=t[0],d="",c=l.length%u,g=0,h=l.length;g<h;g++)d+=l.charAt(g),!((g-c+1)%u)&&g<h-u&&(d+=s);t[0]=d}return t[1]=e[1]&&t[1]?r+t[1]:"",(n?"-":"")+t[0]+t[1]}var d={template:"{lat} {lng}",format:"DD",designators:!0,digits:3};var r=(()=>t(function e(t){n(this,e),t=this.normalizeCoordinateNumbers(t),this.degrees=t[0],this.minutes=t[1],this.seconds=t[2],this.milliseconds=t[3],this.sign=this.normalizedSignOf(this.degrees),this.degrees=Math.abs(this.degrees)},[{key:"normalizeCoordinateNumbers",value:function(e){for(var t,n,i=[0,0,0,0],r=n=0,s=e.length;n<s;r=++n)t=e[r],i[r]=parseFloat(t);return i}},{key:"normalizedSignOf",value:function(e){return 0<=e?1:-1}},{key:"detectSpecialFormats",value:function(){if(this.degreesCanBeSpecial())return this.degreesCanBeMilliseconds()?this.degreesAsMilliseconds():this.degreesCanBeDegreesMinutesAndSeconds()?this.degreesAsDegreesMinutesAndSeconds():this.degreesCanBeDegreesAndMinutes()?this.degreesAsDegreesAndMinutes():void 0}},{key:"degreesCanBeSpecial",value:function(){var e=!1;return e=this.minutes||this.seconds?e:!0}},{key:"degreesCanBeMilliseconds",value:function(){var e=909090<this.degrees;return e}},{key:"degreesAsMilliseconds",value:function(){return this.milliseconds=this.degrees,this.degrees=0}},{key:"degreesCanBeDegreesMinutesAndSeconds",value:function(){var e=9090<this.degrees;return e}},{key:"degreesAsDegreesMinutesAndSeconds",value:function(){var e=Math.floor(this.degrees/1e4);return this.minutes=Math.floor((this.degrees-1e4*e)/100),this.seconds=Math.floor(this.degrees-1e4*e-100*this.minutes),this.degrees=e}},{key:"degreesCanBeDegreesAndMinutes",value:function(){var e=360<this.degrees;return e}},{key:"degreesAsDegreesAndMinutes",value:function(){var e=Math.floor(this.degrees/100);return this.minutes=this.degrees-100*e,this.degrees=e}},{key:"toDecimal",value:function(){return this.sign*(this.degrees+this.minutes/60+this.seconds/3600+this.milliseconds/36e5)}}]))(),s=(()=>t(function e(){n(this,e)},[{key:"isValid",value:function(e){var t;t=!0;try{return this.validate(e),t}catch(e){return t=!1}}},{key:"validate",value:function(e){return this.checkContainsNoLetters(e),this.checkValidOrientation(e),this.checkNumbers(e)}},{key:"checkContainsNoLetters",value:function(e){if(/(?![neswd])[a-z]/i.test(e))throw new Error("Coordinate contains invalid alphanumeric characters.")}},{key:"checkValidOrientation",value:function(e){if(!/^[^nsew]*[ns]?[^nsew]*[ew]?[^nsew]*$/i.test(e))throw new Error("Invalid cardinal direction.")}},{key:"checkNumbers",value:function(e){e=e.match(/-?\d+(\.\d+)?/g);return this.checkAnyCoordinateNumbers(e),this.checkEvenCoordinateNumbers(e),this.checkMaximumCoordinateNumbers(e)}},{key:"checkAnyCoordinateNumbers",value:function(e){if(0===e.length)throw new Error("Could not find any coordinate number")}},{key:"checkEvenCoordinateNumbers",value:function(e){if(e.length%2)throw new Error("Uneven count of latitude/longitude numbers")}},{key:"checkMaximumCoordinateNumbers",value:function(e){if(6<e.length)throw new Error("Too many coordinate numbers")}}]))(),a=(()=>t(function e(t){n(this,e),this.coordinates=t,this.latitudeNumbers=null,this.longitudeNumbers=null,this.validate(),this.parse()},[{key:"validate",value:function(){return(new s).validate(this.coordinates)}},{key:"parse",value:function(){return this.groupCoordinateNumbers(),this.latitude=this.extractLatitude(),this.longitude=this.extractLongitude()}},{key:"groupCoordinateNumbers",value:function(){var e=this.extractCoordinateNumbers(this.coordinates),t=e.length/2;return this.latitudeNumbers=e.slice(0,t),this.longitudeNumbers=e.slice(0-t)}},{key:"extractCoordinateNumbers",value:function(e){return e.match(/-?\d+(\.\d+)?/g)}},{key:"extractLatitude",value:function(){var e=this.coordinateNumbersToDecimal(this.latitudeNumbers);return this.latitudeIsNegative()&&(e*=-1),e}},{key:"extractLongitude",value:function(){var e=this.coordinateNumbersToDecimal(this.longitudeNumbers);return this.longitudeIsNegative()&&(e*=-1),e}},{key:"coordinateNumbersToDecimal",value:function(e){e=new r(e);return e.detectSpecialFormats(),e.toDecimal()}},{key:"latitudeIsNegative",value:function(){return this.coordinates.match(/s/i)}},{key:"longitudeIsNegative",value:function(){return this.coordinates.match(/w/i)}},{key:"getLatitude",value:function(){return this.latitude}},{key:"getLongitude",value:function(){return this.longitude}}]))();e.format=function(e,t,n){Array.isArray(e)?(i=e[0],r=e[1],s=t):"number"==typeof e?(i=e,r=t,s=n):"object"===u(e)&&(i=e.lat,r="lon"in e?e.lon:e.lng,s=t);var i,r,s,a,n=Object.assign({},d,s),o=(e=n,(t={lat:t=i,lng:s=r}).lng<0?(t.lng_neg=!0,t.lng=Math.abs(t.lng)):t.lng_neg=!1,t.lat<0?(t.lat_neg=!0,t.lat=Math.abs(t.lat)):t.lat_neg=!1,180<t.lng&&(t.lng=360-t.lng,t.lng_neg=!t.lng_neg),a="DM"===e.format?(o=(a=parseInt(t.lng))+"&deg; "+l("00."+"0".repeat(e.digits),60*(t.lng-a))+"'",(a=parseInt(t.lat))+"&deg; "+l("00."+"0".repeat(e.digits),60*(t.lat-a))+"'"):"DMS"===e.format?(a=parseInt(t.lng),s=60*(t.lng-a),o=a+"&deg; "+l("00",parseInt(s))+"' "+l("00.0",60*(s-parseInt(s)))+"''",a=parseInt(t.lat),s=60*(t.lat-a),a+"&deg; "+l("00",parseInt(s))+"' "+l("00.0",60*(s-parseInt(s)))+"''"):(o=l("#0."+"0".repeat(e.digits),t.lng)+"&deg;",l("##0."+"0".repeat(e.digits),t.lat)+"&deg;"),{lng:(!e.designators&&t.lng_neg?"-":"")+o+(e.designators?t.lng_neg?" W":" E":""),lat:(!e.designators&&t.lat_neg?"-":"")+a+(e.designators?t.lat_neg?" S":" N":"")});return n.template.replace(/\{lat\}/g,o.lat).replace(/\{lng\}/g,o.lng)},e.parse=function(e){return(e=new a(e)).parse(),{latitude:e.latitude,longitude:e.longitude}}});